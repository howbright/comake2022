(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{5546:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ue}});var o=n(5944),i=n(7294),r=n(1652),a=n(2534),s=n.n(a),l=n(9896),c=n.n(l),u=n(2964),p=n.n(u),d=n(4919),h=n.n(d),f=n(1120),v=n.n(f),_=n(5547),g=n.n(_),y=(n(6689),{embed:s(),table:c(),marker:g(),list:{class:p(),tunes:["signature","footnotes","check"]},header:{class:h(),tunes:["signature","footnotes","check"]},paragraph:{class:v(),tunes:["signature","footnotes","check"]}}),m=n(1494),b=n.n(m);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement(e);Array.isArray(n)?(t=i.classList).add.apply(t,k(n)):n&&i.classList.add(n);for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r]);return i}var x=n(5233),C=n.n(x),N=n(9039),E=n.n(N),S=n(3416);function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var T=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,S.x0)(6),i=this;A(this,e),this.content="",this.node=j("sup",E()["ej-fn-sup"],{contentEditable:"false"}),this._index=0,this.popover=n,this.id=o,O(t,Range)?(this.range=t,t.insertNode(this.node)):(this.node=t,this.node.contentEditable="false",this.node.classList.add(E()["ej-fn-sup"]),this.range=new Range,this.range.selectNode(this.node)),this.node.dataset.tune=e.dataAttribute,this.node.dataset.id=this.id,this.node.addEventListener("click",(function(){i.popover.open(i)}))}var t,n,o;return t=e,(n=[{key:"index",get:function(){return this._index},set:function(e){this._index=e,this.node.textContent=this._index.toString()}},{key:"remove",value:function(){this.node.remove()}},{key:"save",value:function(){return{id:this.id,content:this.content,superscript:this.index}}}])&&L(t.prototype,n),o&&L(t,o),e}();function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function I(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){var n=0;return function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var a=(new Date).getTime();if(!(a-n<e))return n=a,t.apply(void 0,I(i))}}function B(e){var t,n=e.commonAncestorContainer;switch(n.nodeType){case Node.TEXT_NODE:var o;return(null===(o=n.textContent)||void 0===o?void 0:o.length)===e.endOffset&&!n.nextSibling;case Node.ELEMENT_NODE:return n.childNodes.length===e.endOffset&&!((t=n.lastChild)&&t.nodeType===Node.ELEMENT_NODE&&"BR"===t.tagName)}return!1}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}T.dataAttribute="footnotes";var z=function(){function e(t,n,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=j("div",C()["ej-fn-popover"]),this.textarea=j("div",C()["ej-fn-popover__textarea"]),this.currentNote=null,this.lastNote=null,this.api=n,this.wrapper=t,this.readOnly=n.readOnly.isEnabled,this.config=o,this.makeUI(),this.node.addEventListener("keydown",(function(e){e.stopPropagation(),"Enter"===e.key&&i.onEnterPressed(e)}),!0),this.onClickOutside=this.onClickOutside.bind(this),this.move=R(150,this.move.bind(this)).bind(this)}var t,n,o;return t=e,n=[{key:"open",value:function(e){if(this.lastNote===e)return this.close(),void(this.lastNote=null);this.currentNote=e,this.textarea.innerHTML=e.content,this.textarea.contentEditable=this.readOnly?"false":"true",document.addEventListener("click",this.onClickOutside,!0),window.addEventListener("resize",this.move),this.move(),this.node.classList.add(C()["ej-fn-popover--opened"]),function(e){var t=window.getSelection(),n=new Range;n.selectNodeContents(e),n.collapse(),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n)}(this.textarea)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.removeEventListener("click",this.onClickOutside,!0),window.removeEventListener("resize",this.move),this.node.classList.remove(C()["ej-fn-popover--opened"]),this.textarea.contentEditable="false",this.currentNote&&(e&&this.currentNote.remove(),this.readOnly||(this.currentNote.content=this.textarea.innerHTML),this.currentNote=null)}},{key:"makeUI",value:function(){var e=this;if(this.textarea.dataset.inlineToolbar="true",this.textarea.dataset.placeholder=this.api.i18n.t(this.config.placeholder||"Write a footnote"),this.node.append(this.textarea),!this.readOnly){var t=j("div",C()["ej-fn-popover__buttons"]),n=j("button",C()["ej-fn-popover__button"],{textContent:this.api.i18n.t("Apply"),type:"button"}),o=j("button",[C()["ej-fn-popover__button"],C()["ej-fn-popover__button--right"]],{textContent:this.api.i18n.t("Remove"),type:"button"}),i=j("span",C()["ej-fn-popover__hint"],{textContent:"".concat(this.isMacOS()?"\u2318":"Ctrl"," + Enter")});n.addEventListener("click",(function(){return e.close()})),o.addEventListener("click",(function(){confirm(e.api.i18n.t("Are you sure you want to remove this note?"))&&e.close(!0)})),t.append(n,i,o),this.node.append(t)}}},{key:"move",value:function(){if(this.currentNote){var e=this.currentNote.node,t=this.wrapper.querySelector(".ce-block__content"),n=window.getComputedStyle(t),o=this.wrapper.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.node.style.width="",this.node.style.top=i.bottom-o.top+5+"px",o.width<=600)return this.node.style.width=o.width+"px",void(this.node.style.left="0");var r=i.left-o.left-300,a=parseFloat(n.marginLeft)-r,s=r+600-(o.width-parseFloat(n.marginLeft));a>35?r=r+a-35:s>35&&(r=r-s+35),this.node.style.left=r+"px"}}},{key:"onEnterPressed",value:function(e){if(!e.shiftKey){e.preventDefault(),(this.isMacOS()?e.metaKey:e.ctrlKey)&&this.close();var t=window.getSelection(),n=null===t||void 0===t?void 0:t.getRangeAt(0);if(n){var o=B(n);n.insertNode(j("br")),n.collapse(),o&&(n.insertNode(j("br")),n.collapse()),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n),this.textarea.normalize()}}}},{key:"onClickOutside",value:function(e){var t=null!==e.target.closest(".".concat(C()["ej-fn-popover"])),n=null!==e.target.closest(".ce-inline-toolbar"),o=e.target.dataset.tune===T.dataAttribute;t||n||(o&&e.target.textContent===this.currentNote.index.toString()?this.lastNote=this.currentNote:this.lastNote=null,this.close())}},{key:"isMacOS",value:function(){return/Mac/.test(window.navigator.userAgent)}}],n&&P(t.prototype,n),o&&P(t,o),e}(),H=n(5680),F=n.n(H);function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var D=function(){function e(t){var n=t.data,o=t.api,i=t.config,r=void 0===i?{}:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapper=j("div",b()["ej-fn-wrapper"]),this.observer=new MutationObserver(this.contentDidMutated.bind(this)),this.data=[],this.data=n,this.api=o,this.config=r,this.popover=new z(this.wrapper,o,this.config)}var t,n,o;return t=e,(n=[{key:"render",value:function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null,n=j("div",b()["ej-fn-tune"]),o=j("div",b()["ej-fn-tune__icon"],{innerHTML:'<svg width="16" height="16" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"> <path d="M200 46h15.46c.68 0 1.353 0 2.019.005l1.98.017 1.942.027c.32.005.639.011.956.018l1.886.043.93.026 1.83.06 1.797.07 1.762.081c.872.043 1.731.09 2.579.142l1.678.108c.277.018.553.038.827.058l1.63.123 1.6.135c.528.046 1.05.095 1.569.145l1.54.155.759.082 1.496.171c.494.059.984.12 1.47.182l1.441.192c6.667.921 12.475 2.183 17.754 3.773l1.123.345c1.302.41 2.571.839 3.815 1.289l1.059.39c.35.132.7.266 1.047.401l1.035.41c.344.139.685.279 1.025.42l1.015.43 1.005.44.997.45.495.229.985.464.979.474.972.483.484.246.964.498.96.508c15.97 8.54 28.504 21.074 37.045 37.045l.508.96.498.964.489.97.24.486.474.979.464.985.455.993c.075.166.15.332.223.499l.44 1.005.43 1.015c.142.34.282.681.42 1.025l.41 1.035c.136.347.27.696.401 1.047l.391 1.06c.45 1.243.88 2.512 1.289 3.814l.345 1.123c1.59 5.279 2.852 11.087 3.773 17.754l.192 1.442.092.73.177 1.484c.028.249.057.5.084.751l.161 1.526c.078.77.152 1.55.221 2.342l.135 1.6.123 1.63c.02.274.04.55.058.827l.108 1.678c.034.565.067 1.136.097 1.711l.087 1.745.04.885.07 1.796.06 1.832.048 1.867.02.948.033 1.923c.004.323.009.648.012.975l.017 1.98.005 2.019v72.92l-.005 2.019-.017 1.98-.027 1.942c-.005.32-.011.639-.018.956l-.043 1.886-.026.93-.06 1.83-.07 1.797-.081 1.762c-.043.872-.09 1.731-.142 2.579l-.108 1.678c-.018.277-.038.553-.058.827l-.123 1.63-.135 1.6c-.046.528-.095 1.05-.145 1.569l-.155 1.54-.082.759-.171 1.496c-.059.494-.12.984-.182 1.47l-.192 1.441c-.921 6.667-2.183 12.475-3.773 17.754l-.345 1.123a94.514 94.514 0 01-1.289 3.815l-.39 1.059c-.132.35-.266.7-.401 1.047l-.41 1.035a93.96 93.96 0 01-.42 1.025l-.43 1.015-.44 1.005-.45.997-.229.495-.464.985-.474.979-.483.972-.246.484-.498.964-.508.96c-8.54 15.97-21.074 28.504-37.045 37.045l-.96.508-.964.498-.97.489-.486.24-.979.474-.985.464-.993.455c-.166.075-.332.15-.499.223l-1.005.44-1.015.43c-.34.142-.681.282-1.025.42l-1.035.41c-.347.136-.696.27-1.047.401l-1.06.391c-1.243.45-2.512.88-3.814 1.289l-1.123.345c-5.279 1.59-11.087 2.852-17.754 3.773l-1.442.192-.73.092-1.484.177c-.249.028-.5.057-.751.084l-1.526.161c-.77.078-1.55.152-2.342.221l-1.6.135-1.63.123c-.274.02-.55.04-.827.058l-1.678.108c-.565.034-1.136.067-1.711.097l-1.745.087-.885.04-1.796.07-1.832.06-1.867.048-.948.02-1.923.033c-.323.004-.648.009-.975.012l-1.98.017-2.019.005h-30.92l-2.019-.005-1.98-.017-1.942-.027c-.32-.005-.639-.011-.956-.018l-1.886-.043-.93-.026-1.83-.06-1.797-.07-1.762-.081c-.872-.043-1.731-.09-2.579-.142l-1.678-.108c-.277-.018-.553-.038-.827-.058l-1.63-.123-1.6-.135a187.24 187.24 0 01-1.569-.145l-1.54-.155-.759-.082-1.496-.171c-.494-.059-.984-.12-1.47-.182l-1.441-.192c-6.667-.921-12.475-2.183-17.754-3.773l-1.123-.345a94.514 94.514 0 01-3.815-1.289l-1.059-.39c-.35-.132-.7-.266-1.047-.401l-1.035-.41a93.948 93.948 0 01-1.025-.42l-1.015-.43-1.005-.44-.997-.45-.495-.229-.985-.464-.979-.474-.972-.483-.484-.246-.964-.498-.96-.508c-15.97-8.54-28.504-21.074-37.045-37.045l-.508-.96-.498-.964-.489-.97-.24-.486-.474-.979-.464-.985-.455-.993a96.91 96.91 0 01-.223-.499l-.44-1.005-.43-1.015c-.142-.34-.282-.681-.42-1.025l-.41-1.035a93.252 93.252 0 01-.401-1.047l-.391-1.06a94.514 94.514 0 01-1.289-3.814l-.345-1.123c-1.59-5.279-2.852-11.087-3.773-17.754l-.192-1.442a157.65 157.65 0 01-.092-.73l-.177-1.484c-.028-.249-.057-.5-.084-.751l-.161-1.526c-.078-.77-.152-1.55-.221-2.342l-.135-1.6-.123-1.63c-.02-.274-.04-.55-.058-.827l-.108-1.678c-.034-.565-.067-1.136-.097-1.711l-.087-1.745a256.59 256.59 0 01-.04-.885l-.07-1.796-.06-1.832-.048-1.867-.02-.948-.033-1.923a336 336 0 01-.012-.975l-.017-1.98c-.001-.333-.005-.668-.005-1.005V197h40v40.661l.008 1.501.013 1.465.02 1.429.026 1.394.033 1.361.04 1.328.046 1.295.026.635.087 1.86.065 1.202.073 1.173.078 1.144.086 1.116.091 1.088.098 1.062.052.521.108 1.024.114.998.12.975c.02.16.042.32.063.478l.13.94.136.918.07.45.147.886.152.865.158.846.165.826.17.809.178.79.183.775c.03.128.062.255.094.381l.192.75.099.37.202.729.208.714.214.702.22.689.226.677.233.667.238.656.245.647.25.638.257.63.262.623.269.617.274.61.28.606.287.601.44.896.302.593.307.592.313.59c5.316 9.942 13.117 17.743 23.058 23.06l.591.312.592.307.593.301.896.441.601.286.606.28.61.275.617.269.623.262.63.257.638.25.647.245.656.238.667.233.677.226.69.22.7.214.715.208.729.202.743.196c.25.064.503.127.758.19l.774.182.791.178.809.17.826.165.846.158.865.152.886.146.907.14.461.067.94.13.963.124.986.117 1.526.164 1.049.101 1.075.095 1.102.089 1.13.082 1.158.075 1.187.07 1.217.062 1.248.056 1.279.05 1.311.043 1.344.036 1.378.03 1.411.023 1.447.017 2.238.012h33.322l1.516-.007 1.479-.013 1.443-.02 1.407-.028 1.373-.033 1.339-.04 1.306-.048 1.274-.054 1.851-.093 1.197-.07 1.166-.077 1.138-.084 1.11-.09.544-.048 1.069-.1 1.042-.107 1.017-.113.992-.12.968-.125.945-.133.922-.139.453-.072.89-.149.87-.155.849-.161.83-.168.812-.174.794-.18.778-.188.761-.193.746-.2.731-.205.718-.212.704-.219.692-.224.68-.23.67-.238.66-.243.65-.25.64-.255.634-.261.627-.268.62-.274.614-.28.913-.43.604-.296.6-.3.6-.308.597-.313.298-.159c9.94-5.316 17.742-13.117 23.058-23.058l.313-.591.307-.592.301-.593.441-.896.286-.601.28-.606.275-.61.269-.617.262-.623.257-.63.25-.638.245-.647.238-.656.233-.667.226-.677.22-.69.214-.7.208-.715.202-.729.196-.743c.064-.25.127-.503.19-.758l.182-.774.178-.791.17-.809.165-.826.158-.846.152-.865.146-.886.14-.907.067-.461.13-.94.124-.963.117-.986.164-1.526.101-1.049.095-1.075.089-1.102.082-1.13.075-1.158.07-1.187.062-1.217.056-1.248.05-1.279.043-1.311.036-1.344.03-1.378.023-1.411.017-1.447.012-2.238V162.34l-.007-1.516-.013-1.479-.02-1.443-.028-1.407-.033-1.373-.04-1.339-.048-1.306-.054-1.274-.093-1.851-.07-1.197-.077-1.166-.084-1.138-.09-1.11-.048-.544-.1-1.069-.107-1.042-.113-1.017-.12-.992-.125-.968-.133-.945-.139-.922a86.304 86.304 0 00-.072-.453l-.149-.89-.155-.87-.161-.849-.168-.83-.174-.812-.18-.794-.188-.778-.193-.761-.2-.746-.205-.731-.212-.718-.219-.704-.224-.692-.23-.68-.238-.67-.243-.66-.25-.65-.255-.64-.261-.634-.268-.627-.274-.62-.28-.614-.43-.913-.296-.604-.3-.6-.308-.6-.313-.597-.159-.298c-5.316-9.94-13.117-17.742-23.058-23.058l-.585-.31-.586-.304-.587-.298-.59-.293-.593-.287-.597-.28-.602-.275-.607-.27a56.729 56.729 0 00-.305-.132l-.617-.26-.623-.255-.314-.125-.635-.246-.32-.12-.65-.237-.658-.231-.333-.113-.674-.222-.686-.216-.699-.21-.711-.204-.726-.198-.74-.192-.375-.094-.763-.182-.779-.177-.796-.17-.814-.165-.832-.159-.423-.076-.86-.15-.882-.143-.902-.136-.923-.131-.946-.124-.969-.119-.992-.112-1.017-.105-1.042-.1-.53-.047-1.081-.09-1.108-.084-.564-.04-1.15-.073-1.177-.068-1.207-.061-1.238-.055-1.268-.05-1.3-.041-1.331-.036-1.365-.03-1.398-.022-1.433-.017-1.467-.01-.763-.002L200 86V46zm-62.705-3.874c5.1 0 7.427 1.052 9.32 3.213 1.821 2.078 2.767 4.91 2.837 8.499l.004.434v90.52c0 10.594-4.054 15.89-12.161 15.89-3.61 0-9.51-1.08-11.7-3.24-2.113-2.087-3.207-5.131-3.28-9.134l-.003-.432V75.934l-1.208.96-1.176.925-1.703 1.328-1.633 1.254-1.565 1.181-1.008.747-.492.361-.965.699-.472.337-.923.65-.897.62-.439.297-.858.571c-.141.093-.28.184-.42.274l-.82.524-.402.25-.785.478c-8.764 5.233-13.075 4.478-17.093-1.39-2.895-4.229 2.834-11.931 10.26-19.34l.918-.906.464-.451.937-.899.948-.891.954-.883.959-.874.48-.432.96-.856.956-.842.952-.827 1.41-1.208.925-.782 1.357-1.134 1.312-1.083 1.259-1.025 1.951-1.57 1.405-1.115 2.744-2.16c4.879-3.841 8.558-5.526 12.052-6.198l.58-.103.58-.086c.384-.05.769-.091 1.153-.122l.578-.04c.29-.017.579-.029.87-.036l.584-.01.294-.001z"/></svg>'}),i=j("div",b()["ej-fn-tune__label"],{innerText:this.api.i18n.t("Footnote")});if(n.appendChild(o),n.appendChild(i),t&&this.wrapper.contains(t.startContainer)){var r=this;n.addEventListener("click",(function(){r.onClick(t)}))}else n.classList.add(b()["ej-fn-tune--disabled"]);return n}},{key:"save",value:function(){var t=Array.from(this.wrapper.querySelectorAll("sup[data-tune=".concat(T.dataAttribute,"]")));return e.notes.filter((function(e){return t.includes(e.node)})).map((function(e){return e.save()}))}},{key:"wrap",value:function(e){var t=this;return this.wrapper.append(e,this.popover.node),this.hydrate(e),this.observer.observe(this.wrapper,{childList:!0,subtree:!0}),this.shortcut=new(F())({on:this.wrapper,name:this.config.shortcut||"CMD+SHIFT+F",callback:function(){var e=window.getSelection();if(e){var n=e.getRangeAt(0);n&&t.onClick(n)}}}),this.wrapper}},{key:"destroy",value:function(){var e;null===(e=this.shortcut)||void 0===e||e.remove()}},{key:"onClick",value:function(e){e.collapse(!1);var t=new T(e,this.popover);this.insertNote(t),this.popover.open(t),this.api.toolbar.toggleBlockSettings(!1)}},{key:"insertNote",value:function(t){var n=e.notes.findIndex((function(e){return-1===t.range.compareBoundaryPoints(Range.START_TO_START,e.range)}));-1===n&&(n=e.notes.length),e.notes.splice(n,0,t)}},{key:"contentDidMutated",value:function(t){t.some((function(t){var n=Array.from(t.addedNodes).some((function(e){return"SUP"===e.nodeName})),o=Array.from(t.removedNodes).some((function(t){if("SUP"!==t.nodeName)return!1;var n=parseInt(t.textContent||"-1");return e.notes.splice(n-1,1),!0}));return n||o}))&&this.updateIndices()}},{key:"updateIndices",value:function(){e.notes.forEach((function(e,t){return e.index=t+1}))}},{key:"hydrate",value:function(t){var n=this;t.querySelectorAll("sup[data-tune=".concat(T.dataAttribute,"]")).forEach((function(t,o){var i=new T(t,n.popover,n.data[o].id);i.index=parseInt(t.textContent||"0"),i.content=n.data[o].content,e.notes.push(i)}))}}])&&U(t.prototype,n),o&&U(t,o),e}();D.isTune=!0,D.sanitize={sup:{"data-tune":T.dataAttribute,"data-id":!0}},D.notes=[];var V=n(2854),q=n.n(V);function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var Y=function(){function e(t){var n=t.data,o=t.api,i=t.config;K(this,e),this.api=o,this.config=i||{},this.data={url:n.url||"",caption:n.caption||"",withBorder:void 0!==n.withBorder&&n.withBorder,withBackground:void 0!==n.withBackground&&n.withBackground,stretched:void 0!==n.stretched&&n.stretched},this.wrapper=void 0,this.settings=[{name:"withBorder",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.8 10.592v2.043h2.35v2.138H15.8v2.232h-2.25v-2.232h-2.4v-2.138h2.4v-2.28h2.25v.237h1.15-1.15zM1.9 8.455v-3.42c0-1.154.985-2.09 2.2-2.09h4.2v2.137H4.15v3.373H1.9zm0 2.137h2.25v3.325H8.3v2.138H4.1c-1.215 0-2.2-.936-2.2-2.09v-3.373zm15.05-2.137H14.7V5.082h-4.15V2.945h4.2c1.215 0 2.2.936 2.2 2.09v3.42z"/></svg>'},{name:"stretched",icon:'<svg width="17" height="10" viewBox="0 0 17 10" xmlns="http://www.w3.org/2000/svg"><path d="M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z"/></svg>'},{name:"withBackground",icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.043 8.265l3.183-3.183h-2.924L4.75 10.636v2.923l4.15-4.15v2.351l-2.158 2.159H8.9v2.137H4.7c-1.215 0-2.2-.936-2.2-2.09v-8.93c0-1.154.985-2.09 2.2-2.09h10.663l.033-.033.034.034c1.178.04 2.12.96 2.12 2.089v3.23H15.3V5.359l-2.906 2.906h-2.35zM7.951 5.082H4.75v3.201l3.201-3.2zm5.099 7.078v3.04h4.15v-3.04h-4.15zm-1.1-2.137h6.35c.635 0 1.15.489 1.15 1.092v5.13c0 .603-.515 1.092-1.15 1.092h-6.35c-.635 0-1.15-.489-1.15-1.092v-5.13c0-.603.515-1.092 1.15-1.092z"/></svg>'}]}return W(e,[{key:"render",value:function(){var e=this;if(this.wrapper=document.createElement("div"),this.wrapper.classList.add(q().simpleimage),this.data&&this.data.url)return this._createImage(this.data.url,this.data.caption),this.wrapper;var t=document.createElement("input");return this.wrapper.appendChild(t),t.placeholder=this.config.placeholder||"Paste an image URL...",t.value=this.data&&this.data.url?this.data.url:"",t.addEventListener("paste",(function(t){e._createImage(t.clipboardData.getData("text"))})),this.wrapper}},{key:"_createImage",value:function(e,t){var n=this,o=document.createElement("img"),i=document.createElement("div");o.src=e,i.placeholder="Caption...",i.contentEditable=!0,i.innerHTML=t||"",i.addEventListener("click",(function(e){console.log(n.api.toolbar),n.api.toolbar.open()})),this.wrapper.innerHTML="",this.wrapper.appendChild(o),this.wrapper.appendChild(i),this._acceptTuneView()}},{key:"save",value:function(e){var t=e.querySelector("img"),n=e.querySelector("[contenteditable]");return Object.assign(this.data,{url:t.src,caption:n.innerHTML||""})}},{key:"validate",value:function(e){return!!e.url.trim()}},{key:"renderSettings",value:function(){var e=this,t=document.createElement("div");return this.settings.forEach((function(n){var o=e,i=document.createElement("div");i.classList.add(e.api.styles.settingsButton),i.classList.toggle(e.api.styles.settingsButtonActive,e.data[n.name]),i.innerHTML=n.icon,t.appendChild(i),i.addEventListener("click",(function(){o._toggleTune(n.name),i.classList.toggle(o.api.styles.settingsButtonActive)}))})),t}},{key:"_toggleTune",value:function(e){this.data[e]=!this.data[e],this._acceptTuneView()}},{key:"_acceptTuneView",value:function(){var e=this;this.settings.forEach((function(t){e.wrapper.classList.toggle(q()[t.name],!!e.data[t.name]),"stretched"===t.name&&e.api.blocks.stretchBlock(e.api.blocks.getCurrentBlockIndex(),!!e.data.stretched)}))}},{key:"onPaste",value:function(e){switch(console.log("\uc5ec\uae301"),e.type){case"tag":var t=e.detail.data;this._createImage(t.src);break;case"file":var n=this;console.log("\uc5ec\uae302");var o=e.detail.file,i=new FileReader;i.onload=function(e){n._createImage(e.target.result)},i.readAsDataURL(o);break;case"pattern":console.log("\uc5ec\uae303");var r=e.detail.data;this._createImage(r)}}}],[{key:"toolbox",get:function(){return{title:"Image",icon:'<svg width="17" height="15" viewBox="0 0 336 276" xmlns="http://www.w3.org/2000/svg"><path d="M291 150V79c0-19-15-34-34-34H79c-19 0-34 15-34 34v42l67-44 81 72 56-29 42 30zm0 52l-43-30-56 30-81-67-66 39v23c0 19 15 34 34 34h178c17 0 31-13 34-29zM79 0h178c44 0 79 35 79 79v118c0 44-35 79-79 79H79c-44 0-79-35-79-79V79C0 35 35 0 79 0z"/></svg>'}}},{key:"pasteConfig",get:function(){return{tags:["IMG"],files:{mimeTypes:["image/*"],extensions:["gif","jpg","png"],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png)$/i}}}}},{key:"sanitize",get:function(){return{url:!1,caption:{}}}}]),e}(),G=n(3730),J=n.n(G);function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var ee=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a"+(0,S.x0)(6);Z(this,e),this.content="",this.node=j("sup",J()["ej-fn-sup"],{contentEditable:"false"}),this._index=0,this.popover=n,this.id=o,this.node.textContent="\uc11c\uba85/\uc778",$(t,Range)?(this.range=t,t.insertNode(this.node)):(this.node=t,this.node.contentEditable="false",this.node.classList.add(J()["ej-fn-sup"]),this.range=new Range,this.range.selectNode(this.node)),this.node.dataset.tune=e.dataAttribute,this.node.dataset.id=this.id,this.clickEventHandler=this.openPop.bind(this),this.node.addEventListener("click",this.clickEventHandler)}var t,n,o;return t=e,(n=[{key:"openPop",value:function(){this.popover&&this.popover.open(this)}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"remove",value:function(){this.node.remove()}},{key:"save",value:function(){return{id:this.id,content:this.content,superscript:this.index}}},{key:"removePop",value:function(){this.node.removeEventListener("click",this.clickEventHandler),this.node.style.cursor="default",this.node.style.backgroundColor="white",this.node.style.color="grey",this.node.style.border="0",this.node.style.boxShadow="0 0 0 0"}}])&&Q(t.prototype,n),o&&Q(t,o),e}();ee.dataAttribute="footnotes";var te=n(1699),ne=n.n(te),oe=n(6113);function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var re=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=j("div",ne()["ej-fn-popover"]),this.signarea=j("canvas",ne()["ej-fn-popover__canvas"]),this.currentNote=null,this.lastNote=null,this.x=0,this.y=0,this.api=n,this.wrapper=t,this.readOnly=n.readOnly.isEnabled,this.config=o,this.signature=i,this.makeUI(),this.signarea.width=600,this.signarea.height=300,this.sdb=(0,oe.create)(this.signarea),this.sdb.setLineSize(3),this.sdb.setLineColor("black"),this.onClickOutside=this.onClickOutside.bind(this),this.move=R(150,this.move.bind(this)).bind(this)}var t,n,o;return t=e,n=[{key:"open",value:function(e){if(this.lastNote===e)return this.close(),void(this.lastNote=null);this.currentNote=e,document.addEventListener("click",this.onClickOutside,!0),window.addEventListener("resize",this.move),this.move(),this.node.classList.add(ne()["ej-fn-popover--opened"])}},{key:"close",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.removeEventListener("click",this.onClickOutside,!0),window.removeEventListener("resize",this.move);var n=this.wrapper.querySelector("sup[data-id=".concat(null===(e=this.currentNote)||void 0===e?void 0:e.id,"]"));n.style.position="relative";var o=j("div"),i=j("img");i.width=120,i.height=100,i.src=this.sdb.toDataURL(),o.append(i),o.style.position="absolute";var r=n.getBoundingClientRect(),a=(r.bottom-r.top)/2-50,s=(r.right-r.left)/2-70;o.style.top=a+"px",o.style.left=s+"px",n.append(o),this.currentNote.removePop(),this.node.classList.remove(ne()["ej-fn-popover--opened"]),this.currentNote&&(t&&this.currentNote.remove(),this.readOnly,this.currentNote=null)}},{key:"makeUI",value:function(){var e=this;if(this.signarea.classList.add("js-paint"),this.node.append(this.signarea),!this.readOnly){var t=j("div",ne()["ej-fn-popover__buttons"]),n=j("button",ne()["ej-fn-popover__button"],{textContent:this.api.i18n.t("Apply"),type:"button"}),o=j("button",[ne()["ej-fn-popover__button"],ne()["ej-fn-popover__button--right"]],{textContent:this.api.i18n.t("Remove"),type:"button"}),i=j("span",ne()["ej-fn-popover__hint"],{textContent:"".concat(this.isMacOS()?"\u2318":"Ctrl"," + Enter")});n.addEventListener("click",(function(){return e.close()})),o.addEventListener("click",(function(){confirm(e.api.i18n.t("Are you sure you want to remove this note?"))&&e.close(!0)})),t.append(n,i,o),this.node.append(t)}}},{key:"move",value:function(){if(this.currentNote){var e=this.currentNote.node,t=this.wrapper.querySelector(".ce-block__content"),n=window.getComputedStyle(t),o=this.wrapper.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.node.style.width="",this.node.style.top=i.bottom-o.top+5+"px",o.width<=600)return this.node.style.width=o.width+"px",void(this.node.style.left="0");var r=i.left-o.left-300,a=parseFloat(n.marginLeft)-r,s=r+600-(o.width-parseFloat(n.marginLeft));a>35?r=r+a-35:s>35&&(r=r-s+35),this.node.style.left=r+"px"}}},{key:"onEnterPressed",value:function(e){if(!e.shiftKey){e.preventDefault(),(this.isMacOS()?e.metaKey:e.ctrlKey)&&this.close();var t=window.getSelection(),n=null===t||void 0===t?void 0:t.getRangeAt(0);if(n){var o=B(n);n.insertNode(j("br")),n.collapse(),o&&(n.insertNode(j("br")),n.collapse()),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n)}}}},{key:"onClickOutside",value:function(e){var t,n=null!==e.target.closest(".".concat(ne()["ej-fn-popover"])),o=null!==e.target.closest(".ce-inline-toolbar"),i=e.target.dataset.tune===ee.dataAttribute;n||o||(i&&e.target.dataset.id===(null===(t=this.currentNote)||void 0===t?void 0:t.node.dataset.id)?this.lastNote=this.currentNote:this.lastNote=null,this.close())}},{key:"isMacOS",value:function(){return/Mac/.test(window.navigator.userAgent)}}],n&&ie(t.prototype,n),o&&ie(t,o),e}(),ae=n(8822),se=n.n(ae);function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ce=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=j("div",se()["ej-fn-popover"]),this.signimage=j("img",se()["ej-fn-popover__image"]),this.currentNote=null,this.lastNote=null,this.x=0,this.y=0,this.api=n,this.wrapper=t,this.readOnly=n.readOnly.isEnabled,this.config=o,this.makeUI()}var t,n,o;return t=e,(n=[{key:"open",value:function(e){if(this.lastNote===e)return this.close(),void(this.lastNote=null);this.currentNote=e,this.node.classList.add(se()["ej-fn-popover--opened"])}},{key:"close",value:function(){this.node.classList.remove(se()["ej-fn-popover--opened"]),this.currentNote&&(this.readOnly,this.currentNote=null)}},{key:"makeUI",value:function(){var e=j("div",se()["ej-fn-header"]);this.node.append(e,this.signimage),this.node.addEventListener("mouseover",(function(t){e.style.backgroundColor="#333",e.style.cursor="move",e.style.opacity="1"})),this.node.addEventListener("mouseout",(function(t){e.style.opacity="0",e.style.cursor="default"})),j("div",se()["ej-fn-popover__buttons"]);var t=j("button",se()["ej-fn-popover__button"],{textContent:this.api.i18n.t("\uc801\uc6a9"),type:"button"}),n=this.node,o=this.signimage;t.addEventListener("click",(function(){o.height=o.height,o.width=o.width,t.remove(),e.style.opacity="0",n.style.border="0"})),function(e,t){var n=function(e){(e=e||window.event).preventDefault(),s=e.clientX,l=e.clientY,document.onmouseup=i,document.onmousemove=o},o=function(t){(t=t||window.event).preventDefault(),r=s-t.clientX,a=l-t.clientY,s=t.clientX,l=t.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-r+"px"},i=function(){document.onmouseup=null,document.onmousemove=null},r=0,a=0,s=0,l=0;t?t.onmousedown=n:e.onmousedown=n}(this.node,e)}},{key:"move",value:function(){if(this.currentNote){var e=this.currentNote.node,t=this.wrapper.querySelector(".ce-block__content"),n=window.getComputedStyle(t),o=this.wrapper.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.node.style.width="",this.node.style.top=i.bottom-o.top+5+"px",o.width<=600)return this.node.style.width=o.width+"px",void(this.node.style.left="0");var r=i.left-o.left-300,a=parseFloat(n.marginLeft)-r,s=r+600-(o.width-parseFloat(n.marginLeft));a>35?r=r+a-35:s>35&&(r=r-s+35),this.node.style.left=r+"px"}}},{key:"onEnterPressed",value:function(e){if(!e.shiftKey){e.preventDefault(),(this.isMacOS()?e.metaKey:e.ctrlKey)&&this.close();var t=window.getSelection(),n=null===t||void 0===t?void 0:t.getRangeAt(0);if(n){var o=B(n);n.insertNode(j("br")),n.collapse(),o&&(n.insertNode(j("br")),n.collapse()),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n)}}}},{key:"onClickOutside",value:function(e){var t,n=null!==e.target.closest(".".concat(se()["ej-fn-popover"])),o=null!==e.target.closest(".ce-inline-toolbar"),i=e.target.dataset.tune===ee.dataAttribute;n||o||(i&&e.target.dataset.id===(null===(t=this.currentNote)||void 0===t?void 0:t.node.dataset.id)?this.lastNote=this.currentNote:this.lastNote=null,this.close())}},{key:"isMacOS",value:function(){return/Mac/.test(window.navigator.userAgent)}}])&&le(t.prototype,n),o&&le(t,o),e}(),ue=n(7301),pe=n.n(ue);function de(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var he=function(){function e(t){var n=t.data,o=t.api,i=t.config,r=void 0===i?{}:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapper=j("div",pe()["ej-fn-wrapper"]),this.observer=new MutationObserver(this.contentDidMutated.bind(this)),this.data=[],this.data=n,this.api=o,this.config=r,this.signature=new ce(this.wrapper,o,this.config),this.popover=new re(this.wrapper,o,this.config,this.signature)}var t,n,o;return t=e,(n=[{key:"render",value:function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null,n=j("div",pe()["ej-fn-tune"]),o=j("div",pe()["ej-fn-tune__icon"],{innerHTML:'<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="24.000000pt" height="24.000000pt" viewBox="0 0 24.000000 24.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"> <path d="M175 199 c-8 -13 -6 -15 23 -23 26 -9 32 18 6 28 -21 8 -22 8 -29 -5z"/><path d="M41 157 c-30 -36 -21 -111 13 -106 6 1 24 -3 40 -10 37 -15 43 -8 16 19 -15 15 -29 20 -46 16 -20 -5 -24 -3 -24 14 0 26 17 60 30 60 6 0 10 -7 10 -15 0 -8 5 -15 10 -15 16 0 11 37 -6 44 -23 9 -30 8 -43 -7z"/> <path d="M148 115 c-11 -41 -12 -59 -4 -70 6 -8 16 -11 22 -7 11 6 48 112 41 117 -1 2 -11 5 -23 9 -18 6 -22 0 -36 -49z"/> </g> </svg>'}),i=j("div",pe()["ej-fn-tune__label"],{innerText:this.api.i18n.t("\uc11c\uba85/\uc778")});if(n.appendChild(o),n.appendChild(i),t&&this.wrapper.contains(t.startContainer)){var r=this;n.addEventListener("click",(function(e){r.onClick(t)}))}else n.classList.add(pe()["ej-fn-tune--disabled"]);return n}},{key:"save",value:function(){var t=Array.from(this.wrapper.querySelectorAll("sup[data-tune=".concat(ee.dataAttribute,"]")));return e.notes.filter((function(e){return t.includes(e.node)})).map((function(e){return e.save()}))}},{key:"wrap",value:function(e){var t=this;return this.wrapper.append(e,this.popover.node,this.signature.node),this.hydrate(e),this.observer.observe(this.wrapper,{childList:!0,subtree:!0}),this.shortcut=new(F())({on:this.wrapper,name:this.config.shortcut||"CMD+SHIFT+F",callback:function(){var e=window.getSelection();if(e){var n=e.getRangeAt(0);n&&t.onClick(n)}}}),this.wrapper}},{key:"destroy",value:function(){var e;null===(e=this.shortcut)||void 0===e||e.remove()}},{key:"onClick",value:function(e){e.collapse(!1);var t=new ee(e,this.popover);this.insertNote(t),this.api.toolbar.toggleBlockSettings(!1)}},{key:"insertNote",value:function(t){var n=e.notes.findIndex((function(e){return-1===t.range.compareBoundaryPoints(Range.START_TO_START,e.range)}));-1===n&&(n=e.notes.length),e.notes.splice(n,0,t),t.range.collapse()}},{key:"contentDidMutated",value:function(t){t.some((function(t){var n=Array.from(t.addedNodes).some((function(e){return"SUP"===e.nodeName})),o=Array.from(t.removedNodes).some((function(t){if("SUP"!==t.nodeName)return!1;var n=parseInt(t.textContent||"-1");return e.notes.splice(n-1,1),!0}));return n||o}))&&this.updateIndices()}},{key:"updateIndices",value:function(){e.notes.forEach((function(e,t){return e.index=t+1}))}},{key:"hydrate",value:function(t){var n=this;t.querySelectorAll("sup[data-tune=".concat(ee.dataAttribute,"]")).forEach((function(t,o){var i=new ee(t,n.popover,n.data[o].id);i.index=parseInt(t.textContent||"0"),i.content=n.data[o].content,e.notes.push(i)}))}}])&&de(t.prototype,n),o&&de(t,o),e}();he.isTune=!0,he.sanitize={sup:{"data-tune":ee.dataAttribute,"data-id":!0}},he.notes=[];var fe=n(5918),ve=n.n(fe),_e=n(7528),ge=n.n(_e),ye=n(5328),me=n.n(ye);function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ke(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var je=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a"+(0,S.x0)(6);be(this,e),this.content="",this.node=j("sup",me()["ej-fn-sup"],{contentEditable:"false"}),this._index=0,this.popover=n,this.id=o;var i=j("input",me()["ej-fn-sup"],{type:"checkbox"});this.node.appendChild(i),ke(t,Range)?(this.range=t,t.insertNode(this.node)):(this.node=t,this.node.contentEditable="false",this.node.classList.add(me()["ej-fn-sup"]),this.range=new Range,this.range.selectNode(this.node)),this.node.dataset.tune=e.dataAttribute,this.node.dataset.id=this.id}var t,n,o;return t=e,(n=[{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"remove",value:function(){this.node.remove()}},{key:"save",value:function(){return{id:this.id,content:this.content,superscript:this.index}}}])&&we(t.prototype,n),o&&we(t,o),e}();function xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}je.dataAttribute="footnotes";var Ce=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=j("div",ge()["ej-fn-popover"]),this.signarea=j("canvas",ge()["ej-fn-popover__canvas"]),this.currentNote=null,this.lastNote=null,this.api=n,this.wrapper=t,this.readOnly=n.readOnly.isEnabled,this.config=o,this.signature=i,this.makeUI(),this.signarea.width=600,this.signarea.height=300,this.onClickOutside=this.onClickOutside.bind(this),this.move=R(150,this.move.bind(this)).bind(this)}var t,n,o;return t=e,n=[{key:"open",value:function(e){if(this.lastNote===e)return this.close(),void(this.lastNote=null);this.currentNote=e,document.addEventListener("click",this.onClickOutside,!0),window.addEventListener("resize",this.move),this.move(),this.node.classList.add(ge()["ej-fn-popover--opened"])}},{key:"close",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.removeEventListener("click",this.onClickOutside,!0),window.removeEventListener("resize",this.move);var n=this.wrapper.querySelector("sup[data-id=".concat(null===(e=this.currentNote)||void 0===e?void 0:e.id,"]")),o=n.closest(".ce-block"),i=n.getBoundingClientRect(),r=o.getBoundingClientRect(),a=i.top-r.top-50,s=i.left-r.left;this.signature.node.style.top=a+"px",this.signature.node.style.left=s+"px",this.signature.open(this.currentNote),this.node.classList.remove(ge()["ej-fn-popover--opened"]),this.currentNote&&(t&&this.currentNote.remove(),this.readOnly,this.currentNote=null)}},{key:"makeUI",value:function(){var e=this;if(this.signarea.classList.add("js-paint"),this.node.append(this.signarea),!this.readOnly){var t=j("div",ge()["ej-fn-popover__buttons"]),n=j("button",ge()["ej-fn-popover__button"],{textContent:this.api.i18n.t("Apply"),type:"button"}),o=j("button",[ge()["ej-fn-popover__button"],ge()["ej-fn-popover__button--right"]],{textContent:this.api.i18n.t("Remove"),type:"button"}),i=j("span",ge()["ej-fn-popover__hint"],{textContent:"".concat(this.isMacOS()?"\u2318":"Ctrl"," + Enter")});n.addEventListener("click",(function(){return e.close()})),o.addEventListener("click",(function(){confirm(e.api.i18n.t("Are you sure you want to remove this note?"))&&e.close(!0)})),t.append(n,i,o),this.node.append(t)}}},{key:"move",value:function(){if(this.currentNote){var e=this.currentNote.node,t=this.wrapper.querySelector(".ce-block__content"),n=window.getComputedStyle(t),o=this.wrapper.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.node.style.width="",this.node.style.top=i.bottom-o.top+5+"px",o.width<=600)return this.node.style.width=o.width+"px",void(this.node.style.left="0");var r=i.left-o.left-300,a=parseFloat(n.marginLeft)-r,s=r+600-(o.width-parseFloat(n.marginLeft));a>35?r=r+a-35:s>35&&(r=r-s+35),this.node.style.left=r+"px"}}},{key:"onEnterPressed",value:function(e){if(!e.shiftKey){e.preventDefault(),(this.isMacOS()?e.metaKey:e.ctrlKey)&&this.close();var t=window.getSelection(),n=null===t||void 0===t?void 0:t.getRangeAt(0);if(n){var o=B(n);n.insertNode(j("br")),n.collapse(),o&&(n.insertNode(j("br")),n.collapse()),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n)}}}},{key:"onClickOutside",value:function(e){var t,n=null!==e.target.closest(".".concat(ge()["ej-fn-popover"])),o=null!==e.target.closest(".ce-inline-toolbar"),i=e.target.dataset.tune===je.dataAttribute;n||o||(i&&e.target.dataset.id===(null===(t=this.currentNote)||void 0===t?void 0:t.node.dataset.id)?this.lastNote=this.currentNote:this.lastNote=null,this.close())}},{key:"isMacOS",value:function(){return/Mac/.test(window.navigator.userAgent)}}],n&&xe(t.prototype,n),o&&xe(t,o),e}(),Ne=n(3121),Ee=n.n(Ne);function Se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ae=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=j("div",Ee()["ej-fn-popover"]),this.signimage=j("img",Ee()["ej-fn-popover__image"]),this.currentNote=null,this.lastNote=null,this.x=0,this.y=0,this.api=n,this.wrapper=t,this.readOnly=n.readOnly.isEnabled,this.config=o,this.makeUI()}var t,n,o;return t=e,(n=[{key:"open",value:function(e){if(this.lastNote===e)return this.close(),void(this.lastNote=null);this.currentNote=e,this.node.classList.add(Ee()["ej-fn-popover--opened"])}},{key:"close",value:function(){this.node.classList.remove(Ee()["ej-fn-popover--opened"]),this.currentNote&&(this.readOnly,this.currentNote=null)}},{key:"makeUI",value:function(){var e=j("div",Ee()["ej-fn-header"]);this.node.append(e,this.signimage),this.node.addEventListener("mouseover",(function(t){e.style.backgroundColor="#333",e.style.cursor="move",e.style.opacity="1"})),this.node.addEventListener("mouseout",(function(t){e.style.opacity="0",e.style.cursor="default"})),j("div",Ee()["ej-fn-popover__buttons"]);var t=j("button",Ee()["ej-fn-popover__button"],{textContent:this.api.i18n.t("\uc801\uc6a9"),type:"button"}),n=this.node,o=this.signimage;t.addEventListener("click",(function(){o.height=o.height,o.width=o.width,t.remove(),e.style.opacity="0",n.style.border="0"})),function(e,t){var n=function(e){(e=e||window.event).preventDefault(),s=e.clientX,l=e.clientY,document.onmouseup=i,document.onmousemove=o},o=function(t){(t=t||window.event).preventDefault(),r=s-t.clientX,a=l-t.clientY,s=t.clientX,l=t.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-r+"px"},i=function(){document.onmouseup=null,document.onmousemove=null},r=0,a=0,s=0,l=0;t?t.onmousedown=n:e.onmousedown=n}(this.node,e)}},{key:"move",value:function(){if(this.currentNote){var e=this.currentNote.node,t=this.wrapper.querySelector(".ce-block__content"),n=window.getComputedStyle(t),o=this.wrapper.getBoundingClientRect(),i=e.getBoundingClientRect();if(this.node.style.width="",this.node.style.top=i.bottom-o.top+5+"px",o.width<=600)return this.node.style.width=o.width+"px",void(this.node.style.left="0");var r=i.left-o.left-300,a=parseFloat(n.marginLeft)-r,s=r+600-(o.width-parseFloat(n.marginLeft));a>35?r=r+a-35:s>35&&(r=r-s+35),this.node.style.left=r+"px"}}},{key:"onEnterPressed",value:function(e){if(!e.shiftKey){e.preventDefault(),(this.isMacOS()?e.metaKey:e.ctrlKey)&&this.close();var t=window.getSelection(),n=null===t||void 0===t?void 0:t.getRangeAt(0);if(n){var o=B(n);n.insertNode(j("br")),n.collapse(),o&&(n.insertNode(j("br")),n.collapse()),null===t||void 0===t||t.removeAllRanges(),null===t||void 0===t||t.addRange(n)}}}},{key:"onClickOutside",value:function(e){var t,n=null!==e.target.closest(".".concat(Ee()["ej-fn-popover"])),o=null!==e.target.closest(".ce-inline-toolbar"),i=e.target.dataset.tune===je.dataAttribute;n||o||(i&&e.target.dataset.id===(null===(t=this.currentNote)||void 0===t?void 0:t.node.dataset.id)?this.lastNote=this.currentNote:this.lastNote=null,this.close())}},{key:"isMacOS",value:function(){return/Mac/.test(window.navigator.userAgent)}}])&&Se(t.prototype,n),o&&Se(t,o),e}();function Le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Oe=function(){function e(t){var n=t.data,o=t.api,i=t.config,r=void 0===i?{}:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapper=j("div",ve()["ej-fn-wrapper"]),this.observer=new MutationObserver(this.contentDidMutated.bind(this)),this.data=[],this.data=n,this.api=o,this.config=r,this.signature=new Ae(this.wrapper,o,this.config),this.popover=new Ce(this.wrapper,o,this.config,this.signature)}var t,n,o;return t=e,(n=[{key:"render",value:function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null,n=j("div",ve()["ej-fn-tune"]),o=j("div",ve()["ej-fn-tune__icon"],{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z" /></svg>'}),i=j("div",ve()["ej-fn-tune__label"],{innerText:this.api.i18n.t("\uccb4\ud06c")});if(n.appendChild(o),n.appendChild(i),t&&this.wrapper.contains(t.startContainer)){var r=this;n.addEventListener("click",(function(e){r.onClick(t)}))}else n.classList.add(ve()["ej-fn-tune--disabled"]);return n}},{key:"save",value:function(){var t=Array.from(this.wrapper.querySelectorAll("sup[data-tune=".concat(je.dataAttribute,"]")));return e.notes.filter((function(e){return t.includes(e.node)})).map((function(e){return e.save()}))}},{key:"wrap",value:function(e){var t=this;return this.wrapper.append(e,this.popover.node,this.signature.node),this.hydrate(e),this.observer.observe(this.wrapper,{childList:!0,subtree:!0}),this.shortcut=new(F())({on:this.wrapper,name:this.config.shortcut||"CMD+SHIFT+F",callback:function(){var e=window.getSelection();if(e){var n=e.getRangeAt(0);n&&t.onClick(n)}}}),this.wrapper}},{key:"destroy",value:function(){var e;null===(e=this.shortcut)||void 0===e||e.remove()}},{key:"onClick",value:function(e){e.collapse(!1);var t=new je(e,this.popover);this.insertNote(t),this.api.toolbar.toggleBlockSettings(!1)}},{key:"insertNote",value:function(t){var n=e.notes.findIndex((function(e){return-1===t.range.compareBoundaryPoints(Range.START_TO_START,e.range)}));-1===n&&(n=e.notes.length),e.notes.splice(n,0,t),t.range.collapse()}},{key:"contentDidMutated",value:function(t){t.some((function(t){var n=Array.from(t.addedNodes).some((function(e){return"SUP"===e.nodeName})),o=Array.from(t.removedNodes).some((function(t){if("SUP"!==t.nodeName)return!1;var n=parseInt(t.textContent||"-1");return e.notes.splice(n-1,1),!0}));return n||o}))&&this.updateIndices()}},{key:"updateIndices",value:function(){e.notes.forEach((function(e,t){return e.index=t+1}))}},{key:"hydrate",value:function(t){var n=this;t.querySelectorAll("sup[data-tune=".concat(je.dataAttribute,"]")).forEach((function(t,o){var i=new je(t,n.popover,n.data[o].id);i.index=parseInt(t.textContent||"0"),i.content=n.data[o].content,e.notes.push(i)}))}}])&&Le(t.prototype,n),o&&Le(t,o),e}();function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}function Re(e,t){return!t||"object"!==Pe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}Oe.isTune=!0,Oe.sanitize={sup:{"data-tune":je.dataAttribute,"data-id":!0}},Oe.notes=[];var Pe=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ie(e);if(t){var i=Ie(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Re(this,n)}}var He=(0,r.E)(),Fe=Object.assign(y,{signature:he,simpleImage:Y,footnotes:D,check:Oe}),Ue=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(a,e);var t,n,i,r=ze(a);function a(){return Te(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return(0,o.tZ)(He,{onInitialize:this.props.onInitialize,tools:Fe,defaultValue:{time:1635603431943,blocks:[{id:"sheNwCUP5A",type:"header",data:{text:"Editor.js",level:2}},{id:"12iM3lqzcm",type:"paragraph",data:{text:"Hey. Meet the new Editor. On this page you can see it in action \u2014 try to edit this text."}},{id:"fvZGuFXHmK",type:"header",data:{text:"Key features",level:3}},{id:"xnPuiC9Z8M",type:"list",data:{style:"unordered",items:["It is a block-styled editor","It returns clean data output in JSON","Designed to be extendable and pluggable with a simple API"]}},{id:"-MhwnSs3Dw",type:"header",data:{text:"What does it mean \xabblock-styled editor\xbb",level:3}},{id:"Ptb9oEioJn",type:"paragraph",data:{text:'Workspace in classic editors is made of a single contenteditable element, used to create different HTML markups. Editor.js <mark class="cdx-marker">workspace consists of separate Blocks: paragraphs, headings, images, lists, quotes, etc</mark>. Each of them is an independent contenteditable element (or more complex structure) provided by Plugin and united by Editor\'s Core.'}},{id:"-J7nt-Ksnw",type:"paragraph",data:{text:'There are dozens of <a href="https://github.com/editor-js">ready-to-use Blocks</a> and the <a href="https://editorjs.io/creating-a-block-tool">simple API</a> for creation any Block you need. For example, you can implement Blocks for Tweets, Instagram posts, surveys and polls, CTA-buttons and even games.'}},{id:"SzwhuyoFq6",type:"header",data:{text:"What does it mean clean data output",level:3}},{id:"x_p-xddPzV",type:"paragraph",data:{text:"Classic WYSIWYG-editors produce raw HTML-markup with both content data and content appearance. On the contrary, Editor.js outputs JSON object with data of each Block. You can see an example below"}},{id:"6W5e6lkub-",type:"paragraph",data:{text:'Given data can be used as you want: render with HTML for <code class="inline-code">Web clients</code>, render natively for <code class="inline-code">mobile apps</code>, create markup for <code class="inline-code">Facebook Instant Articles</code> or <code class="inline-code">Google AMP</code>, generate an <code class="inline-code">audio version</code> and so on.'}},{id:"eD2kuEfvgm",type:"paragraph",data:{text:"Clean data is useful to sanitize, validate and process on the backend."}},{id:"N8bOHTfUCN",type:"delimiter",data:{}},{id:"IpKh1dMyC6",type:"paragraph",data:{text:"We have been working on this project more than three years. Several large media projects help us to test and debug the Editor, to make it's core more stable. At the same time we significantly improved the API. Now, it can be used to create any plugin for any task. Hope you enjoy. \ud83d\ude0f"}},{id:"FF1iyF3VwN",type:"image",data:{file:{url:"https://codex.so/public/app/img/external/codex2x.png"},caption:"",withBorder:!1,stretched:!1,withBackground:!1}}]}})}}])&&Me(t.prototype,n),i&&Me(t,i),a}(i.Component)},2854:function(e){e.exports={simpleimage:"SimpleImage_simpleimage__MHzM_",withBorder:"SimpleImage_withBorder__dIblB",withBackground:"SimpleImage_withBackground__O07C2"}},5918:function(e){e.exports={"ej-fn-tune":"CheckTune_ej-fn-tune__ZUqUV","ej-fn-tune__icon":"CheckTune_ej-fn-tune__icon__XOXWg","ej-fn-tune__label":"CheckTune_ej-fn-tune__label__WHLz_","ej-fn-tune__disabled":"CheckTune_ej-fn-tune__disabled__SnClb","ej-fn-wrapper":"CheckTune_ej-fn-wrapper__wGuIv"}},5328:function(e){e.exports={"ej-fn-sup":"note_ej-fn-sup__ESkB7","sup-in":"note_sup-in__X3ekE",positionrel:"note_positionrel__pHKPD",outbox:"note_outbox__CBtQS",signbox:"note_signbox__wkiKm",fixed:"note_fixed__t6WP6",both:"note_both__gCtWt",blink:"note_blink__yaBf0"}},7528:function(e){e.exports={"ej-fn-popover":"popover_ej-fn-popover__cU9oO","ej-fn-popover--opened":"popover_ej-fn-popover--opened__2PeUR","fn-popover-in":"popover_fn-popover-in__NXfNF","ej-fn-popover__textarea":"popover_ej-fn-popover__textarea__5he6E","ej-fn-popover__canvas":"popover_ej-fn-popover__canvas__yKGeI","ej-fn-popover__buttons":"popover_ej-fn-popover__buttons__5xLEt","ej-fn-popover__button":"popover_ej-fn-popover__button__jVrsM","ej-fn-popover__button--right":"popover_ej-fn-popover__button--right__GVYko","ej-fn-popover__hint":"popover_ej-fn-popover__hint__5IcV8"}},3121:function(e){e.exports={"ej-fn-header":"signature_ej-fn-header__IJ2Aw","ej-fn-popover":"signature_ej-fn-popover__Npedx","resizer-both":"signature_resizer-both__scT4p","ej-fn-popover__image":"signature_ej-fn-popover__image__Mr7Go","ej-fn-popover--opened":"signature_ej-fn-popover--opened__IaNmd","fn-popover-in":"signature_fn-popover-in__oVULU","ej-fn-popover__textarea":"signature_ej-fn-popover__textarea__utmb1","ej-fn-popover__buttons":"signature_ej-fn-popover__buttons__ghUcC","ej-fn-popover__button":"signature_ej-fn-popover__button__ZJY9a","ej-fn-popover__button--right":"signature_ej-fn-popover__button--right__4x3y6","ej-fn-popover__hint":"signature_ej-fn-popover__hint__1Azf5"}},1494:function(e){e.exports={"ej-fn-tune":"CustomFootnotes_ej-fn-tune__zDUea","ej-fn-tune__icon":"CustomFootnotes_ej-fn-tune__icon__zNHkt","ej-fn-tune__label":"CustomFootnotes_ej-fn-tune__label__WvpQc","ej-fn-tune__disabled":"CustomFootnotes_ej-fn-tune__disabled__gmV1v","ej-fn-wrapper":"CustomFootnotes_ej-fn-wrapper___kXNE"}},9039:function(e){e.exports={"ej-fn-sup":"note_ej-fn-sup__KscRs","sup-in":"note_sup-in____ArE",positionrel:"note_positionrel__gB40Q",outbox:"note_outbox__ZiQ4i",signbox:"note_signbox__uNiGg",fixed:"note_fixed__rtgcB",both:"note_both__CQHjg",blink:"note_blink__hog9c"}},5233:function(e){e.exports={"ej-fn-popover":"popover_ej-fn-popover__L6WPW","ej-fn-popover--opened":"popover_ej-fn-popover--opened__0Tcvp","fn-popover-in":"popover_fn-popover-in__4xzNA","ej-fn-popover__textarea":"popover_ej-fn-popover__textarea__pmLeu","ej-fn-popover__buttons":"popover_ej-fn-popover__buttons__4hOke","ej-fn-popover__button":"popover_ej-fn-popover__button__QfOau","ej-fn-popover__button--right":"popover_ej-fn-popover__button--right__UUl_S","ej-fn-popover__hint":"popover_ej-fn-popover__hint__AlktD"}},7301:function(e){e.exports={"ej-fn-tune":"SignatureTune_ej-fn-tune__73plN","ej-fn-tune__icon":"SignatureTune_ej-fn-tune__icon__Xfns_","ej-fn-tune__label":"SignatureTune_ej-fn-tune__label__WAb6s","ej-fn-tune__disabled":"SignatureTune_ej-fn-tune__disabled__FHm9d","ej-fn-wrapper":"SignatureTune_ej-fn-wrapper__Hd7Iq"}},3730:function(e){e.exports={"ej-fn-sup":"note_ej-fn-sup__SMon8","sup-in":"note_sup-in__7crnj",positionrel:"note_positionrel__E_0Oq",outbox:"note_outbox__eYGup",signbox:"note_signbox__rXnu8",fixed:"note_fixed__qr2Zt",both:"note_both__Mcm8j",blink:"note_blink__lHSjq"}},1699:function(e){e.exports={"ej-fn-popover":"popover_ej-fn-popover__NVCZN","ej-fn-popover--opened":"popover_ej-fn-popover--opened__MvTy7","fn-popover-in":"popover_fn-popover-in__XXJks","ej-fn-popover__textarea":"popover_ej-fn-popover__textarea__OKfgN","ej-fn-popover__canvas":"popover_ej-fn-popover__canvas__1oBxB","ej-fn-popover__buttons":"popover_ej-fn-popover__buttons__nT_PM","ej-fn-popover__button":"popover_ej-fn-popover__button___gxIb","ej-fn-popover__button--right":"popover_ej-fn-popover__button--right__4h1kd","ej-fn-popover__hint":"popover_ej-fn-popover__hint___Ei_m",images:"popover_images__F7Xop"}},8822:function(e){e.exports={"ej-fn-header":"signature_ej-fn-header__cQFq0","ej-fn-popover":"signature_ej-fn-popover__hgfx0","resizer-both":"signature_resizer-both__iLAxd","ej-fn-popover__image":"signature_ej-fn-popover__image__S8pJz","ej-fn-popover--opened":"signature_ej-fn-popover--opened__GvSmi","fn-popover-in":"signature_fn-popover-in__ye4Z3","ej-fn-popover__textarea":"signature_ej-fn-popover__textarea__oL5iO","ej-fn-popover__buttons":"signature_ej-fn-popover__buttons__JrROS","ej-fn-popover__button":"signature_ej-fn-popover__button__Rz4jD","ej-fn-popover__button--right":"signature_ej-fn-popover__button--right__iUJ2i","ej-fn-popover__hint":"signature_ej-fn-popover__hint__nXywy"}}}]);